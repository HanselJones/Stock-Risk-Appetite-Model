<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recommended Stocks</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

</head>
<body>
    <div class="container mt-4">
        <h2>Recommended Stocks for Risk Level: {{ risk_level }}</h2>
        <div class="list-group">
            {% for stock in stocks %}
            <button class="list-group-item list-group-item-action stock-button" 
                data-symbol="{{ stock['symbol'] }}"
                data-volatility="{{ stock['Volatility_14d'] }}"
                data-beta="{{ stock['beta'] }}"
                data-daily-return="{{ stock['daily_return'] }}"
                data-open="{{ stock['open'] }}"
                data-adj-close="{{ stock['adj_close'] }}">
                {{ stock['symbol'] }} ({{ stock['company_name'] }})
            </button>
            <div class="stock-details">
                <p>
                    <strong>Symbol:</strong> <span class="detail-symbol">N/A</span>
                    <span class="detail-description"> - The stock's unique identifier.</span>
                </p>
                <p>
                    <strong>Volatility:</strong> <span class="detail-volatility">N/A</span>
                    <span class="detail-description"> - A measure of the stock's price fluctuations over 14 days.</span>
                </p>
                <p>
                    <strong>Beta:</strong> <span class="detail-beta">N/A</span>
                    <span class="detail-description"> - Indicates the stock's sensitivity to market movements (e.g., beta > 1: more volatile than the market).</span>
                </p>
                <p>
                    <strong>Daily Return:</strong> <span class="detail-daily-return">N/A</span>
                    <span class="detail-description"> - The average daily profit or loss percentage of the stock.</span>
                </p>
                <p>
                    <strong>Open:</strong> <span class="detail-open">N/A</span>
                    <span class="detail-description"> - The price at which the stock opened for trading today.</span>
                </p>
                <p>
                    <strong>Adjusted Close:</strong> <span class="detail-adj-close">N/A</span>
                    <span class="detail-description"> - The closing price adjusted for factors like dividends and splits.</span>
                </p>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        $(document).ready(function() {
            $('.stock-button').on('click', function() {
                // Toggle the stock details visibility
                var details = $(this).next('.stock-details');
                $('.stock-details').not(details).slideUp(); // Hide other details
                details.slideToggle(); // toggle current details

                // get data about the stock after user asks for recommendation
                var symbol = $(this).data('symbol');
                var volatility = $(this).data('volatility');
                var beta = $(this).data('beta');
                var dailyReturn = $(this).data('daily-return');
                var open = $(this).data('open');
                var adjClose = $(this).data('adj-close');

                // Update the details content with the stock data
                details.find('.detail-symbol').text(symbol);
                details.find('.detail-volatility').text(volatility);
                details.find('.detail-beta').text(beta);
                details.find('.detail-daily-return').text(dailyReturn);
                details.find('.detail-open').text(open);
                details.find('.detail-adj-close').text(adjClose);
            });
        });
    </script>
</body>
</html>
